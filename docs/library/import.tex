%% XeLaTeX directive
\usepackage{fontspec}

%% Typesetting
% Color
\usepackage[svgnames]{xcolor} % Additional options: x11names, rgb
% Page backgrounds
\usepackage[some]{background}
% Spacing between lines
\usepackage{setspace}
% Text placement
\usepackage[absolute]{textpos}
% Multilingual support
\usepackage[english]{babel}
% Full page lay-out
\usepackage{fullpage}
% Flexible page lay-out
\usepackage[margin=1in]{geometry}
% URL support
\usepackage{url}
% Clickable hyperlinks
\usepackage{hyperref}
% Picture on title page
\usepackage{titlepic}
% SI Unit typesetting
\usepackage{siunitx}
% Import individually compilable LaTeX (must come begore mathematics)
\usepackage{standalone}
\usepackage{import}
% Mathematics
\usepackage{mathtools}
\usepackage{unicode-math}
% Typewriter text
\usepackage{verbatim}
% List improvements
\usepackage{enumitem}
% No paragraph indent
\usepackage[parfill]{parskip}

% Bibliography
\usepackage[backend=bibtexu,texencoding=utf8,bibencoding=utf8,style=ieee,sortlocale=en_GB,language=auto]{biblatex}
\usepackage[strict,autostyle]{csquotes}

% Include multiple PDF pages
\usepackage[final]{pdfpages}

% Operating system checking
\usepackage{ifplatform}

% Appendix improvements
\usepackage[toc,title,titletoc]{appendix}

%% Graphics (figures, tables, schematics, diagrams, etc)
% Includegraphics
\usepackage{graphicx}
% Figure wrapping
\usepackage{wrapfig}
% Improve floating objects
\usepackage{float}
% Caption improvents
\usepackage{caption}
% Allow for subcaptions in subfigures
\usepackage{subcaption}

% TikZ
\usepackage{tikz}
% TikZ plots
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
% TikZ circuit schematics
\usepackage[american]{circuitikz}
% TikZ Bondgraph drawing 
\usepackage{bondgraph}

% Table rows that span multiple columns and vice versa
\usepackage{multicol}
\usepackage{multirow}
% Table improvents
\usepackage{booktabs}

% Source code inclusion
\usepackage{listings}
\newcommand{\includecode}[4][c]{\lstinputlisting[caption=#2, escapechar=, style=#1,label=#4]{#3}}
\newcommand{\superscript}[1]{\ensuremath{^{\textrm{#1}}}}
\newcommand{\subscript}[1]{\ensuremath{_{\textrm{#1}}}}

% Fix for includepdf bug in Mac OS X
\newcommand{\insertpdfpath}[1]{
	\ifwindows
	\newcommand{\insertpdf}[2]{\includepdf[pages=##1]{##2}}
	\else
	\newcommand{\insertpdf}[2]{\includepdf[pages=##1]{#1/##2}}
	\fi
}

% Matrix and vector notation
\newcommand{\mat}[1]{\mathbf{#1}}
\let\vec\vecold
\newcommand{\vec}[1]{\mathbf{\underline{#1}}}
\newcommand{\tr}[1]{#1^{\text T}} % Transposed